(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a71d4130"],{"35ca":function(e,t,a){"use strict";var r=a("bc3a"),n=a.n(r),i=(a("a18c"),a("e336"));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t,a,r,n,i,s){try{var o=e[i](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){c(i,r,n,s,o,"next",e)}function o(e){c(i,r,n,s,o,"throw",e)}s(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e}var p="/api/users/",g=function(){function e(){h(this,e)}return f(e,null,[{key:"getUsers",value:function(){var e=u(regeneratorRuntime.mark((function e(t,a,r){var s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={params:{limit:t,page:r,search:a}},a.length<=0&&delete s.params.search,l=o(o({},i["a"].getHeader()),s),e.abrupt("return",n.a.get(p,l));case 4:case"end":return e.stop()}}),e)})));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"insertUser",value:function(){var e=u(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return{data:t},a=o({},i["a"].getHeader()),e.abrupt("return",n.a.post(p,t,a));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(e){var t=o({},i["a"].getHeader());return n.a.delete("".concat(p).concat(e),t)}},{key:"updateUser",value:function(e,t){var a=t;a["_id"]=e;var r=o({},i["a"].getHeader());return n.a.put(p,a,r)}},{key:"getUser",value:function(){var e=u(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o(o({},i["a"].getHeader()),{},{validateStatus:function(e){return e<500}}),e.abrupt("return",n.a.get("".concat(p).concat(t),a));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=g},dc02:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CRow",[a("CCol",{attrs:{col:"12",xl:"12"}},[a("CCard",[a("CCardHeader",[e._v(" Users ")]),a("CCardBody",[a("TableList",{ref:"list",attrs:{tblDetails:e.tblDetails,searchDetails:e.searchDetails},on:{getData:e.updateCurrentUrl,modalAction:e.modalAction}})],1)],1)],1)],1)},n=[],i=a("35ca"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CModal",{attrs:{title:e.ModalTitle,size:"lg",show:e.showModal},on:{"update:show":[function(t){e.showModal=t},e.closeConfirmModal]}},[e._v(" "+e._s(e.ModalMsg)+" ")]),a("CRow",{attrs:{alignHorizontal:"end"}},[a("CCol",{attrs:{sm:"2"}},[a("router-link",{attrs:{to:{path:e.tblDetails.buttonsInfo.link}}},[a("CButton",{attrs:{color:"primary"}},[e._v(e._s(e.tblDetails.buttonsInfo.name))])],1)],1),a("CCol",{attrs:{sm:"6"}}),a("CCol",{attrs:{sm:"2"}},[a("CSelect",{attrs:{horizontal:"",options:e.showLimit,placeholder:"Show",value:e.searchDetails.showLimitValue,disabled:e.loading},on:{"update:value":function(t){return e.$set(e.searchDetails,"showLimitValue",t)},change:function(t){return e.gotoPage(t,"reload")}}})],1),a("CCol",{attrs:{sm:"2"}},[a("CInput",{attrs:{horizontal:"",placeholder:"Search Keyword",id:"searchInput",readonly:e.loading},on:{change:function(t){return e.gotoPage(t,"reload")}},model:{value:e.searchDetails.searchKeyword,callback:function(t){e.$set(e.searchDetails,"searchKeyword",t)},expression:"searchDetails.searchKeyword"}})],1)],1),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[e._l(e.tblDetails.header,(function(t,r){return a("th",{key:r,attrs:{scope:"col"}},[e._v(e._s(r))])})),e.tblDetails.editAllow||e.tblDetails.deleteAllow?a("th",{attrs:{scope:"col"}},[e._v("Action")]):e._e()],2)]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[e._l(e.tblDetails.dataList,(function(t){return a("tr",{key:t._id},[e._l(e.tblDetails.header,(function(r,n){return a("td",{key:n},[e._v(e._s(t[r]))])})),e.tblDetails.editAllow||e.tblDetails.deleteAllow?a("td",[a("router-link",{attrs:{to:{path:e.tblDetails.editLink+t[e.tblDetails.primaryKeyinDB]}}},[a("fa",{directives:[{name:"show",rawName:"v-show",value:e.tblDetails.editAllow,expression:"tblDetails.editAllow"}],attrs:{icon:["fas","edit"]}})],1),e._v(" "),a("fa",{directives:[{name:"show",rawName:"v-show",value:e.tblDetails.deleteAllow,expression:"tblDetails.deleteAllow"}],staticClass:"text-danger",attrs:{icon:["fas","trash"]},on:{click:function(a){return e.showDeleteModal(t[e.tblDetails.primaryKeyinDB])}}})],1):e._e()],2)})),e.tblDetails.dataList.length<=0?a("tr",[e.tblDetails.editAllow||e.tblDetails.deleteAllow?a("td",{attrs:{colspan:Object.keys(e.tblDetails.header).length+1}},[e._v("No data")]):a("td",{attrs:{colspan:Object.keys(e.tblDetails.header).length}},[e._v("No data")])]):e._e()],2),a("tbody",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[a("tr",[e.tblDetails.editAllow||e.tblDetails.deleteAllow?a("td",{attrs:{colspan:Object.keys(e.tblDetails.header).length+1}},[a("CSpinner",{staticClass:"text-info"})],1):a("td",{attrs:{colspan:Object.keys(e.tblDetails.header).length}},[a("CSpinner",{staticClass:"text-info"})],1)])])]),e.searchDetails.pagination.totalPage>1?a("nav",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{"aria-label":""}},[a("ul",{staticClass:"pagination justify-content-end"},[a("li",{staticClass:"page-item",class:{disabled:1==e.searchDetails.pagination.activePage},on:{click:function(t){return e.gotoPage(t,"prev")}}},[a("span",{staticClass:"page-link"},[e._v("Previous")])]),e._l(e.searchDetails.pagination.totalPage,(function(t,r){return a("li",{key:r+1,staticClass:"page-item",class:{active:r+1==e.searchDetails.pagination.activePage},on:{click:function(t){return e.gotoPage(t,r+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v(e._s(r+1))])])})),a("li",{staticClass:"page-item",class:{disabled:e.searchDetails.pagination.activePage==e.searchDetails.pagination.totalPage},on:{click:function(t){return e.gotoPage(t,"next")}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("Next")])])],2)]):e._e()],1)},o=[];function l(e,t){return f(e)||d(e,t)||u(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function d(e,t){var a=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var r,n,i=[],s=!0,o=!1;try{for(a=a.call(e);!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){o=!0,n=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(o)throw n}}return i}}function f(e){if(Array.isArray(e))return e}var p={name:"TableList",props:{tblDetails:Object,searchDetails:Object},data:function(){return{loading:!0,showLimit:[1,5,10,15,20],showModal:!1,ModalTitle:"",ModalMsg:"",ModalObjectID:"",usersOpened:null}},computed:{fields:function(){return[{key:"key",label:this.username,_style:"width:150px"},{key:"value",label:"",_style:"width:150px;"}]},userData:function(){var e=this.$route.params.id,t=usersData.find((function(t,a){return a+1==e})),a=t?Object.entries(t):[["id","Not found"]];return a.map((function(e){var t=l(e,2),a=t[0],r=t[1];return{key:a,value:r}}))},visibleData:function(){return this.userData.filter((function(e){return"username"!==e.key}))},username:function(){return this.userData.filter((function(e){return"username"===e.key}))[0].value}},methods:{gotoPage:function(e,t){if(this.showLoad(),isNaN(t)){if(void 0!==e.currentTarget&&e.currentTarget.classList.contains("disabled"))return;switch(t.toString().trim()){case"prev":this.searchDetails.pagination.activePage=this.searchDetails.pagination.activePage>1?this.searchDetails.pagination.activePage-=1:1;break;case"next":this.searchDetails.pagination.activePage=this.searchDetails.pagination.activePage<this.searchDetails.pagination.totalPage?this.searchDetails.pagination.activePage+=1:this.searchDetails.pagination.activePage;break;case"reload":this.searchDetails.pagination.activePage=1;break}}else!0!==e.currentTarget.classList.contains("active")&&(this.searchDetails.pagination.activePage=t);this.$emit("getData"),this.finishLoad()},showLoad:function(){this.loading=!0},finishLoad:function(){this.loading=!1},showDeleteModal:function(e){this.ModalObjectID=e,this.showConfirmModal("Delete",'Do you want to delete "'+e+'"?')},showConfirmModal:function(e,t){this.showModal=!0,this.ModalTitle=e,this.ModalMsg=t},closeConfirmModal:function(e,t,a){if(a)switch(this.ModalTitle){case"Delete":this.$emit("modalAction",this.ModalTitle,this.ModalObjectID);break;default:console.log("No action")}},goBack:function(){this.usersOpened?this.$router.go(-1):this.$router.push({path:"/users"})}}},g=p,v=a("ebbf"),b=Object(v["a"])(g,s,o,!1,null,null,null),w=b.exports;function m(e,t,a,r,n,i,s){try{var o=e[i](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,n)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){m(i,r,n,s,o,"next",e)}function o(e){m(i,r,n,s,o,"throw",e)}s(void 0)}))}}var D={name:"Users",components:{TableList:w},data:function(){return{tblDetails:{editAllow:!0,editLink:"/users/",deleteAllow:!0,deleteLink:"/users/",primaryKeyinDB:"_id",buttonsInfo:{name:"Create user",link:"/users/create"},header:{"#":"_id",Name:"name",Date:"date"},dataList:[]},searchDetails:{showLimitValue:this.$route.query.sl?Number.parseInt(this.$route.query.sl):5,searchKeyword:this.$route.query.sk?this.$route.query.sk:"",pagination:{totalPage:0,activePage:this.$route.query.p?Number.parseInt(this.$route.query.p):1}}}},created:function(){void 0===this.$route.query.sl||void 0===this.$route.query.p?this.updateCurrentUrl(!1):this.getUser()},methods:{rowClicked:function(e,t){this.$router.push({path:"users/".concat(t+1)})},pageChange:function(e){this.$router.push({query:{page:e}})},updateCurrentUrl:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$route.query.sl==this.searchDetails.showLimitValue&&this.$route.query.p==this.searchDetails.pagination.activePage&&this.$route.query.sk==this.searchDetails.searchKeyword||this.$router.push({name:"Users",query:{sl:this.searchDetails.showLimitValue,p:this.searchDetails.pagination.activePage,sk:this.searchDetails.searchKeyword}}),e&&this.getUser()},modalAction:function(e,t){switch(e.toLowerCase()){case"delete":this.deleteUser(t);break;default:break}},getUser:function(){var e=this;return y(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{a=i["a"].getUsers(e.searchDetails.showLimitValue,e.searchDetails.searchKeyword,e.searchDetails.pagination.activePage),a.then((function(t){e.tblDetails.dataList=t.data.dataList,e.searchDetails.pagination.totalPage=t.data.totalPage,e.$refs.list.finishLoad()}))}catch(r){console.log(r)}case 2:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){var t=this;return y(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{r=i["a"].deleteUser(e),r.then((function(e){t.getUser()}))}catch(n){console.log(n)}case 2:case"end":return a.stop()}}),a)})))()}}},k=D,C=Object(v["a"])(k,r,n,!1,null,null,null);t["default"]=C.exports},e336:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}var s=function(){function e(t,a){r(this,e)}return i(e,null,[{key:"getToken",value:function(){var e=localStorage.getItem("token");return e||""}},{key:"getHeader",value:function(){return{headers:{"auth-token":this.getToken()}}}},{key:"setToken",value:function(e){console.log(e),localStorage.setItem("token",e)}}]),e}();t["a"]=s}}]);
//# sourceMappingURL=chunk-a71d4130.248223ce.js.map