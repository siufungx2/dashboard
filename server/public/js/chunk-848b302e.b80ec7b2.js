(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-848b302e"],{"35ca":function(e,t,r){"use strict";var n=r("bc3a"),a=r.n(n),o=(r("a18c"),r("e336"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){c(o,n,a,s,i,"next",e)}function i(e){c(o,n,a,s,i,"throw",e)}s(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}var d="/api/users/",m=function(){function e(){f(this,e)}return h(e,null,[{key:"getUsers",value:function(){var e=l(regeneratorRuntime.mark((function e(t,r,n){var s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={params:{limit:t,page:n,search:r}},r.length<=0&&delete s.params.search,u=i(i({},o["a"].getHeader()),s),e.abrupt("return",a.a.get(d,u));case 4:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"insertUser",value:function(){var e=l(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return{data:t},r=i({},o["a"].getHeader()),e.abrupt("return",a.a.post(d,t,r));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(e){var t=i({},o["a"].getHeader());return a.a.delete("".concat(d).concat(e),t)}},{key:"updateUser",value:function(e,t){var r=t;r["_id"]=e;var n=i({},o["a"].getHeader());return a.a.put(d,r,n)}},{key:"getUser",value:function(){var e=l(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i(i({},o["a"].getHeader()),{},{validateStatus:function(e){return e<500}}),e.abrupt("return",a.a.get("".concat(d).concat(t),r));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=m},e336:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var s=function(){function e(t,r){n(this,e)}return o(e,null,[{key:"getToken",value:function(){var e=localStorage.getItem("token");return e||""}},{key:"getHeader",value:function(){return{headers:{"auth-token":this.getToken()}}}},{key:"setToken",value:function(e){console.log(e),localStorage.setItem("token",e)}}]),e}();t["a"]=s},efab:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("TableForm",{key:e.k,ref:"tf_user",attrs:{formDetails:e.formDetails,columnList:e.columnList},on:{processData:e.processData}})},a=[],o=r("35ca");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var c=function(){function e(){s(this,e)}return u(e,null,[{key:"getObjectKeyByValue",value:function(e,t,r){var n=e.filter((function(e){return e[t]==r}));return n.length>0&&e.indexOf(n[0])}}]),e}(),l=c,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("CCard",[r("CCardHeader",[r("CIcon",{attrs:{name:"cil-pencil"}}),e._v(" "+e._s(this.formDetails.title)+" "),r("div",{staticClass:"card-header-actions"},[r("CLink",{staticClass:"card-header-action btn-minimize",on:{click:function(t){e.formCollapsed=!e.formCollapsed}}},[r("CIcon",{attrs:{name:"cil-chevron-"+(e.formCollapsed?"bottom":"top")}})],1)],1)],1),r("CCollapse",{attrs:{show:e.formCollapsed}},[r("CCardBody",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[r("CAlert",{attrs:{color:"success",closeButton:"",show:e.successShow},on:{"update:show":function(t){e.successShow=t}}},[e._v(" "+e._s(e.successMsg)+" ")]),r("CAlert",{attrs:{show:e.errorShow,color:"danger"},on:{"update:show":function(t){e.errorShow=t}}},[e._v(" "+e._s(e.errorMsg)+" ")]),r("CForm",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[e._l(e.columnList,(function(t){return r("div",{key:t.id},["input"==t.type?r("CInput",{attrs:{label:t.label,description:t.description,type:t.datatype,prepend:t.prepend,append:t.append,disabled:t.disabled,value:e.formData[t.dbColumn]},on:{"update:value":function(r){return e.$set(e.formData,t.dbColumn,r)}}}):e._e()],1)})),r("div",{staticClass:"form-actions"},[r("CButton",{attrs:{type:"submit",color:"primary"}},[e._v(e._s(this.formDetails.btnSubmitText))])],1)],2)],1),r("CCardBody",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"align-middle"},[r("CSpinner",{staticClass:"text-info"})],1)],1)],1)],1)},p=[],h={name:"TableForm",props:{formDetails:Object,columnList:Array},data:function(){return{loading:!0,formCollapsed:!0,formData:{},successShow:!1,successMsg:"",errorShow:!1,errorMsg:""}},methods:{formSubmit:function(){this.successShow=!1,this.successMsg="",this.errorShow=!1,this.errorMsg="",this.$emit("processData",this.formData)},showLoad:function(){this.loading=!0},finishLoad:function(){this.loading=!1},showSuccessAlert:function(e){this.successShow=!0,this.successMsg=e},showErrorAlert:function(e){this.errorShow=!0,this.errorMsg=e},initFormData:function(){this.showLoad();for(var e=0;e<this.columnList.length;e++)this.formData[this.columnList[e].dbColumn]=this.columnList[e].value;this.$forceUpdate(),this.finishLoad()},goBack:function(){this.usersOpened?this.$router.go(-1):this.$router.push({path:"/users"})}}},d=h,m=r("ebbf"),v=Object(m["a"])(d,f,p,!1,null,null,null),b=v.exports;function g(e,t,r,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){g(o,n,a,s,i,"next",e)}function i(e){g(o,n,a,s,i,"throw",e)}s(void 0)}))}}var y={name:"User",components:{TableForm:b},data:function(){return{formDetails:{title:this.$router.currentRoute.path.includes("create")?"Create user":"Edit user",btnSubmitText:this.$router.currentRoute.path.includes("create")?"Create":"Update",submitUrl:"/api/user/register"},columnList:[{type:"input",datatype:"text",label:"Name",prepend:"@",append:"",description:"This is username",dbColumn:"name",value:"",disabled:!1},{type:"input",datatype:"email",label:"Email",prepend:"",append:"",description:"This is email",dbColumn:"email",value:"",disabled:!1},{type:"input",datatype:"password",label:"Password",prepend:"",append:"",description:"This is password",dbColumn:"password",value:"",disabled:!1}],k:0,usersOpened:null}},created:function(){this.$router.currentRoute.path.includes("create")||this.getUserDetail()},mounted:function(){this.$router.currentRoute.path.includes("create")&&this.$nextTick((function(){console.log("create page"),this.$refs.tf_user.finishLoad()}))},methods:{processData:function(e){this.$router.currentRoute.path.includes("create")?this.insertUser(e):this.editUser(e)},insertUser:function(e){var t=this;return w(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{n=o["a"].insertUser(e),n.then((function(e){t.$refs.tf_user.showSuccessAlert("Success")})).catch((function(e){t.$refs.tf_user.showErrorAlert(e.response.data)}))}catch(a){console.log(a)}case 2:case"end":return r.stop()}}),r)})))()},editUser:function(e){var t=this;return w(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{n=o["a"].updateUser(t.$route.params.id,e),n.then((function(e){t.$refs.tf_user.showSuccessAlert("Success")})).catch((function(e){t.$refs.tf_user.showErrorAlert(e.response.data)}))}catch(a){console.log(a)}case 2:case"end":return r.stop()}}),r)})))()},getUserDetail:function(){var e=this;return w(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r=o["a"].getUser(e.$route.params.id),r.then((function(t){var r=t.data;for(var n in r){var a=l.getObjectKeyByValue(e.columnList,"dbColumn",n);!1!==a&&(e.columnList[a]["value"]=r[n])}e.$refs.tf_user.initFormData()})).catch((function(t){console.log(t),e.$refs.tf_user.showErrorAlert(t.response)}))}catch(n){console.log(n)}case 2:case"end":return t.stop()}}),t)})))()},goBack:function(){this.usersOpened?this.$router.go(-1):this.$router.push({path:"/users"})}}},C=y,k=Object(m["a"])(C,n,a,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-848b302e.b80ec7b2.js.map